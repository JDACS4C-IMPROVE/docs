<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Quickstart &mdash; IMPROVE 0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=e031e9a9"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
        <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Benchmark Evaluation Schemes" href="EVALUATION.html" />
    <link rel="prev" title="Welcome to IMPROVE’s documentation!" href="../index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            IMPROVE
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Quickstart</a><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="EVALUATION.html">Benchmark Evaluation Schemes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="eval_csa.html">Cross-Study Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="eval_lc.html">Learning Curves</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="USING.html">Using Models</a><ul>
<li class="toctree-l2"><a class="reference internal" href="using_running.html">Running a Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="using_containers_build.html">Building Containers</a></li>
<li class="toctree-l2"><a class="reference internal" href="using_csa.html">CSA</a><ul>
<li class="toctree-l3"><a class="reference internal" href="using_csa_bruteforce.html">Brute-Force CSA</a></li>
<li class="toctree-l3"><a class="reference internal" href="using_csa_parsl.html">Scaling CSA</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="using_hpo.html">HPO</a><ul>
<li class="toctree-l3"><a class="reference internal" href="using_hpo_prerequisites.html">HPO Prerequisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="using_hpo_req.html">HPO Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="using_hpo_parameters.html">HPO Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="using_hpo-debug-without-containers-lambda.html">HPO without Containers</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="API.html">IMPROVE API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api_preprocess.html">Preprocess</a></li>
<li class="toctree-l2"><a class="reference internal" href="api_train.html">Train</a></li>
<li class="toctree-l2"><a class="reference internal" href="api_infer.html">Infer</a></li>
<li class="toctree-l2"><a class="reference internal" href="api_model.html">Creating model params</a></li>
<li class="toctree-l2"><a class="reference internal" href="api_config.html">Configuration Files</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ReleaseNotes.html">Release Notes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="release_branch_names.html">Branch Naming</a></li>
<li class="toctree-l2"><a class="reference internal" href="release_v0.1.0.html">v0.1.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="release_v0.1.0_checklist.html">v0.1.0 Checklist</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="release_v0.0.3.html">v0.0.3</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">IMPROVE</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Quickstart</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/content/QuickStart.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="quickstart">
<h1>Quickstart<a class="headerlink" href="#quickstart" title="Permalink to this heading"></a></h1>
<p>This quickstart guide is intended to help you install IMPROVE within a conda environment and preprocessing, train, and infer using a curated model and benchmark datasets.
Here we use LGBM as a example of a model in the IMPROVE framework to walk throught the necessary steps to predict drug response using curated IMPROVE Drug Response Datasets.</p>
<div class="toctree-wrapper compound">
</div>
<section id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com">git</a></p></li>
<li><p><a class="reference external" href="https://docs.conda.io/en/latest/">conda</a></p></li>
</ul>
</section>
<section id="install-improve-library">
<h2>Install IMPROVE library<a class="headerlink" href="#install-improve-library" title="Permalink to this heading"></a></h2>
<p>Setup <strong>IMPROVE</strong> from GitHub.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/JDACS4C-IMPROVE/IMPROVE
<span class="nb">cd</span><span class="w"> </span>IMPROVE
<span class="nb">export</span><span class="w"> </span><span class="nv">MY_PATH_TO_IMPROVE</span><span class="o">=</span><span class="sb">`</span><span class="nb">pwd</span><span class="sb">`</span>
</pre></div>
</div>
</section>
<section id="clone-a-model-of-interest">
<h2>Clone a Model of Interest<a class="headerlink" href="#clone-a-model-of-interest" title="Permalink to this heading"></a></h2>
<p>Repositories for all curated models can be found on the <a class="reference external" href="https://github.com/JDACS4C-IMPROVE/">IMPROVE github</a>. A list of models can be found <span class="xref std std-doc">here</span>.
Here we clone the LGBM model.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/JDACS4C-IMPROVE/LGBM
</pre></div>
</div>
</section>
<section id="download-benchmark-dataset">
<h2>Download Benchmark Dataset<a class="headerlink" href="#download-benchmark-dataset" title="Permalink to this heading"></a></h2>
<p>IMPROVE uses publicly available datasets that have been standardized and harmonized for use in assessing machine learning algorithms.
Here we download the Drug Response Prediction Benchmark Dataset (CSA data). There are two options to download this data.</p>
<ol class="upperalpha simple">
<li><p>Directly with wget</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>wget<span class="w"> </span>https://web.cels.anl.gov/projects/IMPROVE_FTP/candle/public/improve/benchmarks/single_drug_drp/benchmark-data-pilot1/csa_data/
</pre></div>
</div>
<ol class="upperalpha simple" start="2">
<li><p>By running the download_csa script</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>LGBM
sh<span class="w"> </span>./download_csa.sh
</pre></div>
</div>
</section>
<section id="set-up-environment">
<h2>Set up Environment<a class="headerlink" href="#set-up-environment" title="Permalink to this heading"></a></h2>
<p>The IMPROVE Framework requires Python and the CANDLE library, as well as environment variables for the dataset path and the IMPROVE directory path. Additionally, each model has specific requirements, details of which can be found in the readme of each model repository.
Here we create a conda environment for LGBM and set up the environment variables.</p>
<ol class="arabic simple">
<li><p>Create and activate conda environment.</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda<span class="w"> </span>create<span class="w"> </span>-n<span class="w"> </span>LGBM<span class="w"> </span><span class="nv">python</span><span class="o">=</span><span class="m">3</span>.7<span class="w"> </span>pip<span class="w"> </span><span class="nv">lightgbm</span><span class="o">=</span><span class="m">3</span>.1.1<span class="w"> </span>--yes
conda<span class="w"> </span>activate<span class="w"> </span>LGBM
pip<span class="w"> </span>install<span class="w"> </span><span class="nv">pyarrow</span><span class="o">==</span><span class="m">12</span>.0.1
pip<span class="w"> </span>install<span class="w"> </span>git+https://github.com/ECP-CANDLE/candle_lib@develop
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Set up environment variables</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">IMPROVE_DATA_DIR</span><span class="o">=</span>”./csa_data/”
<span class="nb">export</span><span class="w"> </span><span class="nv">PYTHONPATH</span><span class="o">=</span><span class="nv">$PYTHONPATH</span>::<span class="o">{</span>MY_PATH_TO_IMPROVE<span class="o">}</span>
</pre></div>
</div>
</section>
<section id="run-preprocessing-script">
<h2>Run preprocessing script<a class="headerlink" href="#run-preprocessing-script" title="Permalink to this heading"></a></h2>
<p>Preprocessing takes the raw data standardized by the IMPROVE project (CSA data), and transforms it into a format appropriate for the model of choice. Data will be divided into input data and y data (e.g. drug response as AUC values) for training, validation, and testing sets to be used in the next two steps. These files are stored in the directory ml_data, in the appropriate sub folders.
Here we run preprocessing for LGBM.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>LGBM
python<span class="w"> </span>lgbm_preprocess_improve.py
</pre></div>
</div>
</section>
<section id="run-training-script">
<h2>Run training script<a class="headerlink" href="#run-training-script" title="Permalink to this heading"></a></h2>
<p>The training script trains the model of interest, using the validation set for early stopping. This will generate the trained model, the predictions on the validation data, and the prediction performance scores on the validation data. The trained model and data are stored in the directory out_model.
Here we run training for LGBM.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>lgbm_train_improve.py
</pre></div>
</div>
</section>
<section id="run-inference-script">
<h2>Run inference script<a class="headerlink" href="#run-inference-script" title="Permalink to this heading"></a></h2>
<p>The inference script will use the model trained in the previous step to predict drug response for the test set and evaluate the performance of these predictions. This data is stored in the directory out_infer.
Here we run inference for LGBM.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>lgbm_infer_improve.py
</pre></div>
</div>
<p>TODO: where to find metrics</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../index.html" class="btn btn-neutral float-left" title="Welcome to IMPROVE’s documentation!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="EVALUATION.html" class="btn btn-neutral float-right" title="Benchmark Evaluation Schemes" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, IMPROVE Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      Version: 
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      
      <br>
      </dl>
    </div>
  </div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>