<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>UNO &mdash; IMPROVE 0.1 documentation</title><link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="How to run a container" href="running-containers.html" />
    <link rel="prev" title="MODEL_NAME" href="MODEL_NAME.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> IMPROVE
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="whatis.html">What is the IMPROVE project?</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installing IMPROVE</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="models.html">Models</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="models.html#curated-community-models">Curated community models</a></li>
<li class="toctree-l2"><a class="reference internal" href="models.html#current-models">Current Models</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="models.html#github-preparation-template">GitHub Preparation Template</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">UNO</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#unified-drug-response-predictor">Unified-Drug-Response-Predictor</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="running-containers.html">How to run a container</a></li>
<li class="toctree-l1"><a class="reference internal" href="building-containers.html">How to build a container</a></li>
<li class="toctree-l1"><a class="reference internal" href="dataframes.html">Dataframes</a></li>
<li class="toctree-l1"><a class="reference internal" href="acknowledgment.html">Acknowledgments</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">IMPROVE</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="models.html">Models</a> &raquo;</li>
      <li>UNO</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/content/github-readme-template.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="uno">
<h1>UNO<a class="headerlink" href="#uno" title="Permalink to this headline">¶</a></h1>
<div class="section" id="unified-drug-response-predictor">
<h2>Unified-Drug-Response-Predictor<a class="headerlink" href="#unified-drug-response-predictor" title="Permalink to this headline">¶</a></h2>
<div class="section" id="description">
<h3>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h3>
<p>The Unified Drug Response Predictor benchmark, also called Uno, is a deep neural network for modeling cell line response to treatments of single or paired drugs. The model takes cell line molecular features, drug properties, and dose information as input and predicts the response in percentage growth. The model uses a multi-tower structure for processing different feature types individually before concatenating them for the final layers. The model also unifies treatment input types of single drugs and drug pairs by allocating two slots for drugs and, in the case of drug pairs, dividing the concentration into the two slots. The authors of this model have integrated datasets from multiple public sources of drug response studies and provided options for training models with selections of subsets.</p>
</div>
<div class="section" id="user-community">
<h3>User Community<a class="headerlink" href="#user-community" title="Permalink to this headline">¶</a></h3>
<p>Cancer biology data modeling; Machine Learning; Bioinformatics; Computational Biology</p>
</div>
<div class="section" id="usability">
<h3>Usability<a class="headerlink" href="#usability" title="Permalink to this headline">¶</a></h3>
<p>To use the untrained model, users must be familiar with processing and feature extraction of molecular drug data, gene expression, and training of neural networks. The input to the model is preprocessed data. Users should have extended experience with preprocessing this data.</p>
</div>
<div class="section" id="uniqueness">
<h3>Uniqueness<a class="headerlink" href="#uniqueness" title="Permalink to this headline">¶</a></h3>
<p>The community can use a neural network and multiple machine learning techniques to predict drug response. The general rule is that classical methods like random forests would perform better for small datasets, while neural network approaches like Uno would perform better for relatively larger datasets. The baseline for comparison can be: mean response, linear regression, or random forest regression.</p>
</div>
<div class="section" id="components">
<h3>Components<a class="headerlink" href="#components" title="Permalink to this headline">¶</a></h3>
<p>The following components are in the Model and Data Clearinghouse (MoDaC):
* The [Unified Drug Response Predictor (Uno)](<a class="reference external" href="https://modac.cancer.gov/searchTab?dme_data_id=NCI-DME-MS01-7654821">https://modac.cancer.gov/searchTab?dme_data_id=NCI-DME-MS01-7654821</a>) asset contains the untrained model and trained model:</p>
<blockquote>
<div><ul class="simple">
<li><p>The model topology file is uno.model.json.</p></li>
<li><p>The trained model is defined by combining the untrained model (uno.model.json) and model weights (uno.model.h5).</p></li>
<li><p>The trained model is used in inference.</p></li>
</ul>
</div></blockquote>
<ul class="simple">
<li><p>The [Pilot 1 Cancer Drug Response Prediction Dataset](<a class="reference external" href="https://modac.cancer.gov/searchTab?dme_data_id=NCI-DME-MS01-8088592">https://modac.cancer.gov/searchTab?dme_data_id=NCI-DME-MS01-8088592</a>) asset contains the processed training and test data.</p></li>
</ul>
</div>
<div class="section" id="technical-section">
<h3>Technical Section<a class="headerlink" href="#technical-section" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="setup">
<h3>Setup<a class="headerlink" href="#setup" title="Permalink to this headline">¶</a></h3>
<p>To set up the Python environment needed to train and run this model:
1. Install [conda](<a class="reference external" href="https://docs.conda.io/en/latest/">https://docs.conda.io/en/latest/</a>) package manager.
2. Clone this repository.
3. Create the environment as shown below.</p>
<p><code class="docutils literal notranslate"><span class="pre">`bash</span> <span class="pre">conda</span> <span class="pre">env</span> <span class="pre">create</span> <span class="pre">-f</span> <span class="pre">environment.yml</span> <span class="pre">-n</span> <span class="pre">UNO</span>
<span class="pre">`</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">`conda</span> <span class="pre">activate</span> <span class="pre">UNO</span>
<span class="pre">`</span></code></p>
</div>
<div class="section" id="training">
<h3>Training<a class="headerlink" href="#training" title="Permalink to this headline">¶</a></h3>
<p>To train the model from scratch, execute the script [uno_baseline_keras2.py](uno_baseline_keras2.py). This script does the following:
* Reads the model configuration parameters from [uno_default_model.txt](uno_default_model.txt).
* Downloads the training data and splits it to training/validation sets.
* Creates and trains the Keras model.
* Saves the best-trained model based on the validation accuracy.</p>
<p>Training Uno on all data sources is slow. The <cite>–train_sources</cite> parameter can be used to test the code with a smaller set of training data. An example command line is the following.</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">python</span> <span class="pre">uno_baseline_keras2.py</span> <span class="pre">--train_sources</span> <span class="pre">gCSI</span> <span class="pre">--cache</span> <span class="pre">cache/gCSI</span> <span class="pre">--use_landmark_genes</span> <span class="pre">True</span> <span class="pre">--preprocess_rnaseq</span> <span class="pre">source_scale</span> <span class="pre">--no_feature_source</span> <span class="pre">True</span> <span class="pre">--no_response_source</span> <span class="pre">True</span>
<span class="pre">`</span></code></p>
<p>A faster example is given in the <cite>uno_by_drug_example.txt</cite> configuration file. This example focuses on a single drug (paclitaxel) and trains at 15s/epoch on a single P100.</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">python</span> <span class="pre">uno_baseline_keras2.py</span> <span class="pre">--config_file</span> <span class="pre">uno_by_drug_example.txt</span>
<span class="pre">`</span></code></p>
</div>
<div class="section" id="inference">
<h3>Inference<a class="headerlink" href="#inference" title="Permalink to this headline">¶</a></h3>
<p>To test the trained model in inference, execute the script [uno_infer2.py](uno_infer2.py). This script does the following:
* Downloads the trained model.
* Downloads the processed test dataset with the corresponding labels.
* Performs inference on the test dataset.
* Reports the accuracy of the model on the test dataset.</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">python</span> <span class="pre">uno_infer2.py</span> <span class="pre">--train_sources</span> <span class="pre">CTRP</span> <span class="pre">GDSC</span> <span class="pre">NCI60</span> <span class="pre">SCL</span> <span class="pre">SCLC</span> <span class="pre">ALMANAC</span>&#160; <span class="pre">--use_landmark_genes</span> <span class="pre">True</span> <span class="pre">--preprocess_rnaseq</span> <span class="pre">source_scale</span> <span class="pre">--no_feature_source</span> <span class="pre">True</span> <span class="pre">--no_response_source</span> <span class="pre">True</span> <span class="pre">--test_sources</span> <span class="pre">gCSI</span>
<span class="pre">`</span></code></p>
</div>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="MODEL_NAME.html" class="btn btn-neutral float-left" title="MODEL_NAME" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="running-containers.html" class="btn btn-neutral float-right" title="How to run a container" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, IMPROVE Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>